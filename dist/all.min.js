function IndexManager(t,e){this.indexZone=t,this.indexTemplate=Handlebars.compile($("#index-template").html()),this.init.call(this),this.HOW_MANY_IN_A_PAGE=3,this.HOW_MANY_IN_ARRANGE=5,this.FIX_VALUE_FOR_REMAINDER=.1,this.QUINTUPLE=5,this.ee=e}function TodoManager(t,e){this.todoZone=t,this.todoTemplate=Handlebars.compile($("#todo-template").html()),this.init.call(this,1),this.ee=e,this.indexCache=[],this.ee.addListener("move",this.print.bind(this))}$(document).ready(function(){init()});var indexZone=$("#index-zone"),todoZone=$("#todo-zone"),eventEmitter=new EventEmitter,init=function(){indexManager=new IndexManager(indexZone,eventEmitter),todoManager=new TodoManager(todoZone,eventEmitter)};IndexManager.prototype.init=function(){$.ajax("http://128.199.76.9:8002/wkddngus5/todo/count",{type:"get"}).done(function(t,e){this.todoCount=t.cnt,this.nowIndex=1,this.makeIndex.bind(this)()}.bind(this)),this.indexZone.on("click",this.movePage.bind(this))},IndexManager.prototype.makeIndex=function(){this.startIndex=this.calcStartIndex(this.nowIndex),this.todoIndexMax=this.calcTodoIndexMax(this.todoCount);for(var t=[],e=this.startIndex;e<=this.todoIndexMax&&e<this.startIndex+5;e++)t.push({number:e});var n=$(this.indexTemplate({index:t}));this.indexZone.empty(),this.indexZone.append(n),1==this.nowIndex&&($(".move-left").addClass("disabled"),$(".move-left-quintuple").addClass("disabled")),this.nowIndex==this.todoIndexMax&&($(".move-right").addClass("disabled"),$(".move-right-quintuple").addClass("disabled")),this.markSelected.call(this)},IndexManager.prototype.movePage=function(t){if(console.log("CLICKED! DISABLE?",$(t.target).hasClass("disabled")),$(t.target).hasClass("disabled"))return t.preventDefault(),void $(t.target).css("background-color","white");$(t.target).hasClass("index-number")?this.nowIndex=parseInt($(t.target).prop("id")):$(t.target).hasClass("move-left")?this.nowIndex--:$(t.target).hasClass("move-right")?this.nowIndex++:$(t.target).hasClass("move-left-quintuple")?this.nowIndex=this.nowIndex>this.QUINTUPLE?this.nowIndex-this.QUINTUPLE:1:$(t.target).hasClass("move-right-quintuple")&&(this.nowIndex=this.nowIndex<=this.todoIndexMax-this.QUINTUPLE?this.nowIndex+this.QUINTUPLE:this.todoIndexMax),this.ee.emit("move",{index:this.nowIndex,max:this.todoIndexMax}),this.makeIndex()},IndexManager.prototype.calcStartIndex=function(t){return parseInt((t-this.FIX_VALUE_FOR_REMAINDER)/this.HOW_MANY_IN_ARRANGE)*this.HOW_MANY_IN_ARRANGE+1},IndexManager.prototype.calcTodoIndexMax=function(t){return parseInt((t-this.FIX_VALUE_FOR_REMAINDER)/this.HOW_MANY_IN_A_PAGE)+1},IndexManager.prototype.markSelected=function(){$("index-number").removeClass("selected"),$("#"+this.nowIndex).addClass("selected")},TodoManager.prototype.init=function(t){console.log("INDEX: ",t),this.index=t,$.ajax("http://128.199.76.9:8002/wkddngus5/todo/page?start="+3*(t-1)+"&limit=3",{type:"get"}).done(function(t,e){this.makeTodos.call(this,t),this.indexCache.push({index:this.index,data:t})}.bind(this))},TodoManager.prototype.makeTodos=function(t,e){this.todoElements=$(this.todoTemplate({todoElement:t})),this.todoZone.empty(),this.todoZone.append(this.todoElements)},TodoManager.prototype.print=function(t){for(var e=0;e<this.indexCache.length;e++)if(this.indexCache[e].index==t.index)return void this.makeTodos.call(this,this.indexCache[e].data);this.init.call(this,t.index)};